/**
 * Default Vector Stylesheet
 * -----------------------------------------------------------------------------
 * Gaps separate rows. Currently 6 columns by 4 rows in size.
 */

$helper-path: '' !default;

$social-sprites: add-spritesheet(social, (
    path: 'vectors/button-sprites.svg',
    dimensions: (6, 5),
    sprites: (
        beard: (1, 1, #343537),
        discuss: (2, 1, #b9dfbc),
        email: (3, 1, #f5756c),
        facebook: (4, 1, #3B5998),
        flickr: (5, 1, #ff0084),
        github: (6, 1, #666666),
        google: (1, 2, #dd4b39),
        instagram: (2, 2, #3f729b),
        linkedin: (3, 2, #0976b4),
        pinterest: (4, 2, #cc2127),
        print: (5, 2, #007aaf),
        reddit: (6, 2, #ff5700),
        rss: (1, 3, #ff6600),
        search: (2, 3, #000000),
        share: (3, 3, #000000),
        tumblr: (4, 3, #35465c),
        twitter: (5, 3, #55acee),
        youtube: (6, 3, #b31217),
        menu: (1, 4, #000000),
        close: (2, 4, #000000)
    )
)) !default;

/**
 * Get Social Network Colour
 * -----------------------------------------------------------------------------
 * @param   string      $network        Social network.
 * @return  string                      Network colour.
 */

@function social-color($network) {
    @return nth(get-sprite(social, $network), 3);
}

/**
 * Social Images and Colours
 * -----------------------------------------------------------------------------
 * I wanted to reduce the work (and load time) of ubiqui-cancerous social 
 * icons. This mixin generates uses an SVG spritemap with PNG fallback to 
 * generate social icons for popular networks. Have a look at _defaults.scss to
 * see the list of currently supported services, as well as the format used. 
 * 
 * I have included black and white minimal icons; the background colours of the
 * element will be that for the relevant network.
 * 
 * On $selector: There were some cases where I want the social style 
 * to be attached to the parent, and on other occasions to an arbitrary child 
 * instead. 
 * 
 * If $selector for the background image exists, it is attached to selector,
 * elsewise to the parent.
 * 
 * @param   map         $size           Sizes for square-flex(). 
 * @param   string      $selector       Optional selector.
 * @param   bool        $split          Seperate icon colour from icon.
 * @param   map         $networks       Social networks to output.
 */

@mixin social($size: null, $selector: null, $split: false, $networks: null) {
    // @debug spritesheet(seek, social sprites);

    @if not $networks {
        $networks: (
            beard, discuss, email, facebook, flickr, github, google, instagram,
            linkedin, pinterest, print, reddit, rss, search, share, tumblr,
            twitter, menu, close
        );
    }

    // Parse selector, if any.
    $selector: if($selector, ' ' + $selector, $selector);

    &#{$selector} {
        @if $size {
            @include square-flex($size);
        }
    }

    @each $network in $networks {
        // Iterate, one class per nework.
        $colour: social-color($network);

        @if $split {
            &.#{$network} {
                background-color: $colour;
            }
        }

        &.#{$network}#{$selector} {
            background: sprite(social, $network);

            @if not $split {
                background-color: $colour;
            }

            @content;
        }
    }
}
